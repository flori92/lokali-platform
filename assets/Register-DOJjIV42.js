import{r as e,j as s,a4 as a,a5 as r,a6 as t,a7 as l,a8 as i,a9 as c,m as n,y as o,aa as d,a1 as m,a2 as p,L as h,a3 as x}from"./vendor-Cn8FdjXV.js";import{c as u,H as j,L as f,I as v,B as N}from"./label-CxDvxxCk.js";import{C as g,a as b,b as y,c as w,d as C,A as k,e as q}from"./alert-2rPWewaC.js";import{u as L}from"./index-BKeWXIph.js";const F=e.forwardRef(({className:e,...r},t)=>s.jsx(a,{className:u("grid gap-2",e),...r,ref:t}));F.displayName=a.displayName;const X=e.forwardRef(({className:e,...a},i)=>s.jsx(r,{ref:i,className:u("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:s.jsx(t,{className:"flex items-center justify-center",children:s.jsx(l,{className:"h-2.5 w-2.5 fill-current text-current"})})}));X.displayName=r.displayName;const P=e.forwardRef(({className:e,...a},r)=>s.jsx(i,{ref:r,className:u("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...a,children:s.jsx(c,{className:u("flex items-center justify-center text-current"),children:s.jsx(n,{className:"h-4 w-4"})})}));P.displayName=i.displayName;const S=()=>{const[a,r]=e.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",role:"guest",acceptTerms:!1}),[t,l]=e.useState(!1),[i,c]=e.useState(!1),[n,u]=e.useState(!1),[S,z]=e.useState(""),{signUp:T}=L(),R=o(),V=(e,s)=>{r(a=>({...a,[e]:s}))};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(j,{}),s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsx("div",{className:"max-w-md mx-auto",children:s.jsxs(g,{children:[s.jsxs(b,{className:"space-y-1",children:[s.jsxs(y,{className:"text-2xl font-bold text-center flex items-center justify-center gap-2",children:[s.jsx(d,{className:"h-6 w-6"}),"Inscription"]}),s.jsx(w,{className:"text-center",children:"Créez votre compte Lokali pour commencer"})]}),s.jsxs(C,{children:[s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),z(""),a.name.trim()?a.email.trim()?a.phone.trim()?a.password.length<6?(z("Le mot de passe doit contenir au moins 6 caractères"),0):a.password!==a.confirmPassword?(z("Les mots de passe ne correspondent pas"),0):a.acceptTerms||(z("Vous devez accepter les conditions d'utilisation"),0):(z("Le téléphone est requis"),0):(z("L'email est requis"),0):(z("Le nom est requis"),0)){u(!0);try{await T(a.email,a.password,{name:a.name,phone:a.phone,role:a.role}),R("/login",{state:{message:"Compte créé avec succès ! Vérifiez votre email pour confirmer votre compte."}})}catch(s){z(s instanceof Error?s.message:"Erreur lors de la création du compte")}finally{u(!1)}}},className:"space-y-4",children:[S&&s.jsx(k,{variant:"destructive",children:s.jsx(q,{children:S})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"name",children:"Nom complet"}),s.jsx(v,{id:"name",type:"text",placeholder:"Votre nom complet",value:a.name,onChange:e=>V("name",e.target.value),required:!0,disabled:n})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"email",children:"Email"}),s.jsx(v,{id:"email",type:"email",placeholder:"votre@email.com",value:a.email,onChange:e=>V("email",e.target.value),required:!0,disabled:n})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"phone",children:"Téléphone"}),s.jsx(v,{id:"phone",type:"tel",placeholder:"+229 XX XX XX XX",value:a.phone,onChange:e=>V("phone",e.target.value),required:!0,disabled:n})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(f,{children:"Type de compte"}),s.jsxs(F,{value:a.role,onValueChange:e=>V("role",e),disabled:n,children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(X,{value:"guest",id:"guest"}),s.jsx(f,{htmlFor:"guest",className:"font-normal",children:"Locataire - Je cherche un logement"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(X,{value:"owner",id:"owner"}),s.jsx(f,{htmlFor:"owner",className:"font-normal",children:"Propriétaire - Je loue mes biens"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"password",children:"Mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(v,{id:"password",type:t?"text":"password",placeholder:"Minimum 6 caractères",value:a.password,onChange:e=>V("password",e.target.value),required:!0,disabled:n}),s.jsx(N,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!t),disabled:n,children:t?s.jsx(m,{className:"h-4 w-4"}):s.jsx(p,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(f,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(v,{id:"confirmPassword",type:i?"text":"password",placeholder:"Répétez votre mot de passe",value:a.confirmPassword,onChange:e=>V("confirmPassword",e.target.value),required:!0,disabled:n}),s.jsx(N,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>c(!i),disabled:n,children:i?s.jsx(m,{className:"h-4 w-4"}):s.jsx(p,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(P,{id:"terms",checked:a.acceptTerms,onCheckedChange:e=>V("acceptTerms",e),disabled:n}),s.jsxs(f,{htmlFor:"terms",className:"text-sm font-normal",children:["J'accepte les"," ",s.jsx(h,{to:"/terms",className:"text-blue-600 hover:underline",children:"conditions d'utilisation"})," ","et la"," ",s.jsx(h,{to:"/privacy",className:"text-blue-600 hover:underline",children:"politique de confidentialité"})]})]}),s.jsxs(N,{type:"submit",className:"w-full",disabled:n,children:[n&&s.jsx(x,{className:"mr-2 h-4 w-4 animate-spin"}),"Créer mon compte"]})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Déjà un compte ?"," ",s.jsx(h,{to:"/login",className:"text-blue-600 hover:underline font-medium",children:"Se connecter"})]})})]})]})})})]})};export{S as default};
