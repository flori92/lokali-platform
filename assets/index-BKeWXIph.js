const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=[window.__assetsPath("assets/Index-Btlks8C_.js"),window.__assetsPath("assets/vendor-Cn8FdjXV.js"),window.__assetsPath("assets/label-CxDvxxCk.js"),window.__assetsPath("assets/PublishProperty-Bn_Xg3eY.js"),window.__assetsPath("assets/Login-Bovf4cxB.js"),window.__assetsPath("assets/alert-2rPWewaC.js"),window.__assetsPath("assets/Register-DOJjIV42.js")])))=>i.map(i=>d[i]);
import{c as e,r,j as s,R as t,_ as a,Q as n,a as i,B as o,b as l,d as c,L as d,e as u}from"./vendor-Cn8FdjXV.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)}).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();const m=e("https://ubxbnrsflatmbnipqmah.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVieGJucnNmbGF0bWJuaXBxbWFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc0NTQ0NjAsImV4cCI6MjA1MzAzMDQ2MH0.X8kGbEQKZyQBvJgJvJgJvJgJvJgJvJgJvJgJvJgJvJg",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});class h{static async signInWithGoogle(){try{const{error:e}=await m.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(e)throw new Error(e.message);return{success:!0,message:"Connexion Google initiÃ©e"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Erreur lors de la connexion Google"}}}static async signUp(e,r,s){const{data:t,error:a}=await m.auth.signUp({email:e,password:r,options:{data:{name:s.name,phone:s.phone,role:s.role||"guest"}}});if(a)throw new Error(a.message);return t.user&&await this.createUserProfile(t.user.id,{email:t.user.email,name:s.name,phone:s.phone,role:s.role||"guest"}),{success:!0,user:t.user?{id:t.user.id,email:t.user.email,name:s.name,phone:s.phone,role:s.role||"guest",verified:null!==t.user.email_confirmed_at}:null,message:"Inscription rÃ©ussie"}}static async signIn(e,r){const{data:s,error:t}=await m.auth.signInWithPassword({email:e,password:r});if(t)throw new Error(t.message);return s}static async signOut(){const{error:e}=await m.auth.signOut();if(e)throw new Error(e.message)}static async getCurrentUser(){const{data:{user:e}}=await m.auth.getUser();if(!e)return null;const{data:r,error:s}=await m.from("users").select("*").eq("id",e.id).single();return s?null:{id:e.id,email:e.email,name:r.name,phone:r.phone,role:r.role,verified:r.verified}}static async createUserProfile(e,r){const{error:s}=await m.from("users").insert({id:e,email:r.email,name:r.name,phone:r.phone,role:r.role,verified:!1});if(s)throw new Error("Erreur lors de la crÃ©ation du profil utilisateur")}static async updateProfile(e,r){const{error:s}=await m.from("users").update(r).eq("id",e);if(s)throw new Error("Erreur lors de la mise Ã  jour du profil")}static async resetPassword(e){const{error:r}=await m.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});if(r)throw new Error(r.message)}static onAuthStateChange(e){return m.auth.onAuthStateChange(async(r,s)=>{if(s?.user){const r=await this.getCurrentUser();e(r)}else e(null)})}}const x=r.createContext(void 0),p=()=>{const e=r.useContext(x);if(void 0===e)throw new Error("useAuth doit Ãªtre utilisÃ© dans un AuthProvider");return e},g=({children:e})=>{const[t,a]=r.useState(null),[n,i]=r.useState(!0);r.useEffect(()=>{(async()=>{try{const e=await h.getCurrentUser();a(e)}catch(e){}finally{i(!1)}})();const{data:{subscription:e}}=h.onAuthStateChange(e=>{a(e),i(!1)});return()=>{e?.unsubscribe()}},[]);const o={user:t,loading:n,signIn:async(e,r)=>{i(!0);try{await h.signIn(e,r)}catch(s){throw i(!1),s}},signUp:async(e,r,s)=>{i(!0);try{await h.signUp(e,r,s)}catch(t){throw i(!1),t}},signOut:async()=>{i(!0);try{await h.signOut(),a(null)}catch(e){}finally{i(!1)}},updateProfile:async e=>{if(!t)throw new Error("Utilisateur non connectÃ©");await h.updateProfile(t.id,e),a({...t,...e})},resetPassword:async e=>{await h.resetPassword(e)}};return s.jsx(x.Provider,{value:o,children:e})},f=r.createContext(void 0),b=({children:e})=>{const{announce:t,trapFocus:a,generateId:n,announcements:i,announcementRef:o}=(()=>{const[e,s]=r.useState([]);return{announce:(e,r="polite")=>{s(r=>[...r,e]),setTimeout(()=>{s(e=>e.slice(1))},1e3)},trapFocus:e=>{const r=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),s=r[0],t=r[r.length-1],a=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===s&&(t.focus(),e.preventDefault()):document.activeElement===t&&(s.focus(),e.preventDefault()))};return e.addEventListener("keydown",a),s?.focus(),()=>{e.removeEventListener("keydown",a)}},checkContrast:(e,r)=>!0,generateId:(e="a11y")=>`${e}-${Math.random().toString(36).substr(2,9)}`,announcements:e,announcementRef:r.useRef(null)}})();return s.jsxs(f.Provider,{value:{announce:t,trapFocus:a,generateId:n},children:[e,s.jsx("div",{ref:o,"aria-live":"polite","aria-atomic":"true",className:"sr-only",role:"status",children:i.map((e,r)=>s.jsx("div",{children:e},r))}),s.jsx("div",{"aria-live":"assertive","aria-atomic":"true",className:"sr-only",role:"alert",id:"error-announcements"})]})};class j extends t.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-red-50 p-8",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"ðŸš¨ Erreur de rendu dÃ©tectÃ©e"}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"Une erreur s'est produite lors du rendu du composant."}),this.state.error&&s.jsxs("details",{className:"bg-gray-100 p-4 rounded",children:[s.jsx("summary",{className:"font-medium cursor-pointer",children:"DÃ©tails de l'erreur"}),s.jsxs("pre",{className:"mt-2 text-sm text-red-600 overflow-auto",children:[this.state.error.message,"\n",this.state.error.stack]})]}),s.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"RÃ©essayer"})]})]})}):this.props.children}}r.lazy(()=>a(()=>import("./Index-Btlks8C_.js"),__vite__mapDeps([0,1,2]),import.meta.url).catch(()=>({default:()=>s.jsx("div",{children:"Erreur de chargement de la page d'accueil"})})));const v=r.lazy(()=>a(()=>import("./PublishProperty-Bn_Xg3eY.js"),__vite__mapDeps([3,1]),import.meta.url).catch(()=>({default:()=>s.jsx("div",{children:"Erreur de chargement de la page de publication"})}))),y=r.lazy(()=>a(()=>import("./Login-Bovf4cxB.js"),__vite__mapDeps([4,1,2,5]),import.meta.url).catch(()=>({default:()=>s.jsx("div",{children:"Erreur de chargement de la page de connexion"})}))),w=r.lazy(()=>a(()=>import("./Register-DOJjIV42.js"),__vite__mapDeps([6,1,2,5]),import.meta.url).catch(()=>({default:()=>s.jsx("div",{children:"Erreur de chargement de la page d'inscription"})}))),N=new n({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}}),E=()=>s.jsx("div",{className:"min-h-screen bg-white",children:s.jsxs("main",{className:"container mx-auto p-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Trouvez votre logement idÃ©al au BÃ©nin"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"DÃ©couvrez notre sÃ©lection de propriÃ©tÃ©s exceptionnelles Ã  travers le BÃ©nin. Des appartements modernes aux villas traditionnelles, trouvez l'hÃ©bergement parfait pour votre sÃ©jour."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx("div",{className:"h-48 bg-gray-200 flex items-center justify-center",children:s.jsx("span",{className:"text-gray-500",children:"Image de propriÃ©tÃ©"})}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Villa Moderne Ã  Cotonou"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Belle villa avec 3 chambres, piscine et jardin."}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-2xl font-bold text-blue-600",children:"25,000 FCFA/nuit"}),s.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"RÃ©server"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx("div",{className:"h-48 bg-gray-200 flex items-center justify-center",children:s.jsx("span",{className:"text-gray-500",children:"Image de propriÃ©tÃ©"})}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Appartement Centre-ville"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Appartement moderne au cÅ“ur de Porto-Novo."}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-2xl font-bold text-blue-600",children:"15,000 FCFA/nuit"}),s.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"RÃ©server"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx("div",{className:"h-48 bg-gray-200 flex items-center justify-center",children:s.jsx("span",{className:"text-gray-500",children:"Image de propriÃ©tÃ©"})}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Maison Traditionnelle"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Authentique maison bÃ©ninoise avec charme local."}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-2xl font-bold text-blue-600",children:"12,000 FCFA/nuit"}),s.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"RÃ©server"})]})]})]})]})]})}),I=()=>s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),P=()=>s.jsx("header",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("h1",{className:"text-2xl font-bold text-blue-600",children:"Lokali"})}),s.jsxs("nav",{className:"flex space-x-8",children:[s.jsx(d,{to:"/",className:"text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium",children:"Accueil"}),s.jsx(d,{to:"/publish",className:"text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium",children:"Publier"}),s.jsx(d,{to:"/login",className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700",children:"Connexion"})]})]})})});function C(){return r.useEffect(()=>{const{redirect:e}=sessionStorage;delete sessionStorage.redirect,e&&e!==location.href&&history.replaceState(null,"",e)},[]),s.jsx(j,{children:s.jsx(b,{children:s.jsx(g,{children:s.jsx(i,{client:N,children:s.jsx(o,{basename:"/lokali-platform",children:s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(P,{}),s.jsx(r.Suspense,{fallback:s.jsx(I,{}),children:s.jsxs(l,{children:[s.jsx(c,{path:"/",element:s.jsx(E,{})}),s.jsx(c,{path:"/publish",element:s.jsx(v,{})}),s.jsx(c,{path:"/login",element:s.jsx(y,{})}),s.jsx(c,{path:"/register",element:s.jsx(w,{})}),s.jsx(c,{path:"*",element:s.jsx(E,{})})]})})]})})})})})})}u(document.getElementById("root")).render(s.jsx(C,{}));export{h as A,p as u};
